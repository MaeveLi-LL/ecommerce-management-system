# 项目启动和部署命令总结

## 启动数据库（Docker）

在项目根目录 `ecommerce-management-system` 下执行：

```bash
# 启动数据库和 pgAdmin
docker-compose up -d

# 查看运行状态
docker-compose ps

# 停止服务
docker-compose down
```

**访问地址：**
- PostgreSQL: `localhost:5432`
- pgAdmin: `http://localhost:5050` (邮箱: admin@ecommerce.com, 密码: admin123)

---

##  启动后端服务

在 `ecommerce-management-system/backend` 目录下执行：

```bash
# 进入后端目录
cd backend

# 安装依赖（首次运行）
npm install

# 生成 Prisma Client（首次运行或修改 schema 后）
npx prisma generate

# 执行数据库迁移（首次运行或修改 schema 后）
npx prisma migrate dev

# 启动开发服务器
npm run start:dev
```

**访问地址：**
- 后端 API: `http://localhost:3003`
- Swagger 文档: `http://localhost:3003/api`

---

##  启动前端服务

在 `ecommerce-management-system/frontend` 目录下执行：

```bash
# 进入前端目录
cd frontend

# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev
```

**访问地址：**
- 前端应用: `http://localhost:3001`

---

##完整启动流程（新环境）

# 1. 启动数据库
cd ecommerce-management-system
docker-compose up -d

# 2. 启动后端（新开一个终端）
cd ecommerce-management-system/backend
npm install
npx prisma generate
npx prisma migrate dev
npm run start:dev

# 3. 启动前端（再新开一个终端）
cd ecommerce-management-system/frontend
npm install
npm run dev
```

---

## 上传到 GitHub

在项目根目录 `Progect_Test` 下执行：

```bash
# 1. 查看修改状态
git status

# 2. 添加所有修改的文件
git add .

# 3. 提交修改（记得修改提交信息）
git commit -m "xxx"

# 4. 推送到 GitHub
git push origin main

# 如果第一次推送，使用：
git push -u origin main
```

**常用提交信息格式：**
- `feat: 添加新功能`
- `fix: 修复bug`
- `docs: 更新文档`
- `style: 代码格式调整`
- `refactor: 代码重构`

---

##  日常开发流程

```bash
# 1. 启动数据库（如果还没启动）
cd ecommerce-management-system
docker-compose up -d

# 2. 启动后端（终端1）
cd ecommerce-management-system/backend
npm run start:dev

# 3. 启动前端（终端2）
cd ecommerce-management-system/frontend
npm run dev

# 4. 开发完成后提交代码
cd ../../  # 回到 Progect_Test 目录
git add .
git commit -m "你的提交信息"
git push origin main
```

---

##  常见问题

### 数据库连接失败
- 检查 Docker 是否运行：`docker ps`
- 检查容器是否启动：`docker-compose ps`

### 后端启动失败
- 检查数据库是否启动
- 检查 `.env` 文件是否存在且配置正确
- 运行 `npx prisma generate` 重新生成 Client

### 前端无法连接后端
- 检查后端是否在 `http://localhost:3003` 运行
- 检查浏览器控制台错误信息

### Prisma 权限错误
- 停止后端服务后再运行 `npx prisma generate`
- 或者以管理员身份运行终端

---

##  注意事项

1. **数据库迁移**：修改 `schema.prisma` 后需要执行 `npx prisma migrate dev`
2. **Prisma Client**：每次修改 schema 后需要运行 `npx prisma generate`
3. **端口占用**：确保 3003（后端）、3001（前端）、5432（数据库）、5050（pgAdmin）端口未被占用
4. **环境变量**：确保 `backend/.env` 文件存在且配置正确

